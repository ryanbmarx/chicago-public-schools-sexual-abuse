.header{

	& * {
		color: white !important;
	}

	&__headline{
		text-align: center;
	}
	&__dek{
		text-align: center;
	}

	&__panel{
		height: 100vh;
		// border: 1px dashed yellow;

		display:flex;
		flex-flow: column;
		align-items:flex-start;
		justify-content: flex-end;

		z-index: 3;
		position: relative;

		box-sizing: border-box;
		padding: $grid-gap / 2;
	}

	.header__panel.header__panel--headline{
		// We use this selector b/c we want to be very specific so it does not 
		// take up the changes to other panels.

		height: calc(100vh - var(--navbar-height));// Because the headline panel DOES include the navbar
		justify-content: center;
		width: 100vw;
	}

	&__map{
		position: sticky;
		top: 0;

		background: red;
		// height: calc(100vh - var(--navbar-height));
	    width: 320px;
	    margin: 0 auto;
	}

	&__panel-text{
		@include serif-text(30px, 1.3em, normal);
		text-align: center;
	}
}

.map{

	&__layer{
			opacity:0;
			transition: opacity 150ms ease;

			position: absolute;
			top:0;
			left:0;
			width: 100%;
	}

	&__layer--base{
		opacity: 1;
	}

	&__layer--visible{
			opacity:1;
			transition: opacity 150ms ease;
	}
}


// USE CSS AND A DATA-* ATTRIBUTE ON THE BODY 
// TO TOGGLE VISIBLITY OF THE APPROPRIATE IMAGES

// PANEL 1
[data-header-panel="intro_ex_1"]{
	.map__layer.map__layer--intro_ex_1{
		opacity: 1;
	}
}

// PANEL 2
[data-header-panel="intro_ex_2"]{
	.map__layer.map__layer--intro_ex_1, 
	.map__layer.map__layer--intro_ex_2{
		opacity: 1;
	}
}

// PANEL 3
[data-header-panel="intro_ex_3"]{
	.map__layer.map__layer--intro_ex_1, 
	.map__layer.map__layer--intro_ex_2, 
	.map__layer.map__layer--intro_ex_3{
		opacity: 1;
	}
}
// PANEL 4
[data-header-panel="intro_police_locs"]{
	.map__layer.map__layer--intro_police_locs{
		opacity: 1;
	}
}

// PANEL 5
[data-header-panel="intro_civil_suits_locs"]{
	.map__layer.map__layer--intro_police_locs,
	.map__layer.map__layer--intro_civil_suits_locs{
		opacity: 1;
	}
}

// PANEL 6
[data-header-panel="intro_citations_locs"]{
	.map__layer.map__layer--intro_police_locs,
	.map__layer.map__layer--intro_civil_suits_locs,
	.map__layer.map__layer--intro_citations_locs{
		opacity: 1;
	}
}

// PANEL 7
[data-header-panel="intro_dont_know"]{
	.map__layer.map__layer--intro_dont_know{
		opacity: 1;
	}
}

@media all and (min-width: $tablet-min-width){
	.header{
		&__panel{
			// height: calc(100vh - var(--navbar-height));
			padding: $grid-gap * 2;
			max-width: 50vw;
			align-items:flex-start;
			justify-content: center;

			height: 600px;
			max-height: 100vh;
		}

		&__panel--headline{
			align-items:center;
			max-width: 100vw;
		}
		&__map{
			background: red;
			height: calc(100vh - var(--navbar-height));
			// width: 50vw;
			width: calc(4 * (100vh - var(--navbar-height)) / 5);


			// position: sticky;
			top: var(--navbar-height);
			// left: 50%;
			z-index: 2;
		}
		
		&__panel-text{
			// @include serif-text(30px, 1.3em, normal);
			text-align: left;
		}
	}	

	@supports (display:griddddddd){
		.header{
			display:grid;
			grid-template: calc(100vh - var(--navbar-height)) auto / 1fr 1fr;
			// grid-gap: $grid-gap;
			
			&__panel.header__panel--headline{
				align-self:center;
				// max-width: 100vw;
				grid-row: 1;
				grid-column: 1 / -1;
			}

			&__map{
				// top: var(--navbar-height);
				// left: auto;
				// z-index: 2;
				margin: 0;
				grid-row: 2;
				grid-column: 2 / -1;
			}

			&__panel{
				// grid-row: 2;
				grid-column: 1 / 2;
				// align-self: start;
				// justify-self: center;
			}
		}
	}
	@supports not (display:griddddddd){
		.header{
			// display:grid;
			// grid-template: calc(100vh - var(--navbar-height)) auto / 1fr 1fr;
			// grid-gap: $grid-gap;
			
			&__panel.header__panel--headline{
				// align-self:center;
				// max-width: 100vw;
				// grid-row: 1;
				// grid-column: 1 / -1;
			}

			&__map{
				// top: var(--navbar-height);
				left: 50vw;
				// z-index: 2;
				margin: 0;

			}

			&__panel{
				// grid-row: 2;
				// grid-column: 1 / 2;
				// align-self: start;
				// justify-self: center;
			}
		}
	}
}